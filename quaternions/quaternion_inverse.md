### **四元数的逆（Inverse）推导**

四元数的逆  $q^{-1}$  定义为满足：

$$
q q^{-1} = q^{-1} q = 1
$$

其中  $1$  是乘法单位元（即实部为1，虚部为0的四元数）。

---

### **1. 四元数的共轭（Conjugate）**
首先，定义四元数  $q = a + b\mathbf{i} + c\mathbf{j} + d\mathbf{k}$  的共轭为：

$$
q^* = a - b\mathbf{i} - c\mathbf{j} - d\mathbf{k}
$$


---

### **2. 四元数的模（Norm）**
四元数的模（范数）定义为：

$$
\|q\| = \sqrt{a^2 + b^2 + c^2 + d^2}
$$


---

### **3. 四元数乘以其共轭**
计算  $q q^*$ ：

$$
q q^* = (a + b\mathbf{i} + c\mathbf{j} + d\mathbf{k})(a - b\mathbf{i} - c\mathbf{j} - d\mathbf{k})
$$

展开后，利用四元数乘法规则（ $\mathbf{i}^2 = \mathbf{j}^2 = \mathbf{k}^2 = -1$ ，以及  $\mathbf{i}\mathbf{j} = \mathbf{k}$ ， $\mathbf{j}\mathbf{i} = -\mathbf{k}$ ，等等），所有交叉项会相互抵消，最终得到：

$$
q q^* = a^2 + b^2 + c^2 + d^2 = \|q\|^2
$$

同理：

$$
q^* q = \|q\|^2
$$


---

### **4. 推导四元数的逆**
我们希望找到  $q^{-1}$  使得：

$$
q q^{-1} = 1
$$

观察  $q q^* = \|q\|^2$ ，我们可以两边除以  $\|q\|^2$ ：

$$
q \left( \frac{q^*}{\|q\|^2} \right) = 1
$$

因此，四元数的逆为：

$$
q^{-1} = \frac{q^*}{\|q\|^2}
$$


---

### **5. 特殊情况：单位四元数**
如果  $q$  是**单位四元数**（即  $\|q\| = 1$ ），则：

$$
q^{-1} = q^*
$$

这就是为什么在旋转计算中，单位四元数的逆可以直接用共轭代替，从而简化运算。

---

### **6. 验证**
设  $q = 1 + \mathbf{i} + \mathbf{j} + \mathbf{k}$ ，计算其逆：
1. 共轭：

$$
   q^* = 1 - \mathbf{i} - \mathbf{j} - \mathbf{k}
   $$

2. 模：

$$
   \|q\| = \sqrt{1^2 + 1^2 + 1^2 + 1^2} = 2
   $$

3. 逆：

$$
   q^{-1} = \frac{q^*}{\|q\|^2} = \frac{1 - \mathbf{i} - \mathbf{j} - \mathbf{k}}{4}
   $$

4. 验证：

$$
   q q^{-1} = (1 + \mathbf{i} + \mathbf{j} + \mathbf{k}) \left( \frac{1 - \mathbf{i} - \mathbf{j} - \mathbf{k}}{4} \right) = \frac{1 - \mathbf{i}^2 - \mathbf{j}^2 - \mathbf{k}^2}{4} = \frac{1 + 1 + 1 + 1}{4} = 1
   $$

   符合逆的定义。

---

### **7. 总结**
- **一般四元数的逆**：

$$
  q^{-1} = \frac{q^*}{\|q\|^2}
  $$

- **单位四元数的逆**（ $\|q\| = 1$ ）：

$$
  q^{-1} = q^*
  $$

这一性质使得单位四元数在旋转计算中非常高效，因为求逆只需取共轭，无需额外计算。
